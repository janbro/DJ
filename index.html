<!doctype html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="css/normalize.css" type="text/css">
  <link rel="stylesheet" href="css/skeleton.css" type="text/css">
  <style>.video-container {
	position:relative;
	padding-bottom:56.25%;
	padding-top:30px;
	height:0;
	overflow:hidden;
}

.video-container iframe, .video-container object, .video-container embed {
	position:absolute;
	top:0;
	left:0;
	width:100%;
	height:100%;
}</style>
  <script>
  var previousText="";
  function getNextSongs() {
  $.ajax({
      url: 'songs-queued.txt',
      dataType: 'text',
      success: function(text) {
        setTimeout(getNextSongs, 500);
        if(text!=previousText){
            $('#nextSongs').empty();
            $('#nowPlaying').empty();
            var songs = text.split('\n');
            $('#nowPlaying').append("<thead><tr><th>â–¶ Now Playing</th></tr></thead><tbody>");
            if(text!=""){
              $('#nowPlaying').append("<tr><td>"+songs[0].split("~")[2]+"</td></tr></tbody>");
            }songs.shift();songs.pop(); //remove first and last 'songs'
            var i=1;
            $('#nextSongs').append("<thead><tr><th>Queued</th></tr></thead><tbody>");
            for(var s of songs){
              $('#nextSongs').append("<tr><td>"+s.split("~")[2]+"</td></tr>");
              i++;
            }
            $('#nextSongs').append("</tbody>");
            previousText=text;
          }
      }
  })
  }
  </script>
  <meta charset="utf-8" />
    <title>Search</title>
  </head>
  <body onload='getNextSongs();'>
    <div class="container">
      <table class='u-full-width' id='nowPlaying'></table>
      <table class='u-full-width' id='nextSongs'></table>
      <div id="buttons" class="row">
        <div class="two columns">
          <select id="search-site" class="u-full-width">
            <option value="Soundcloud">SoundCloud</option>
            <option value="YouTube">YouTube</option>
            <option value="Spotify">Spotify</option>
          <select>
        </div>
        <div class="eight columns">
          <input id="query" class="u-full-width" type="text"/>
        </div>
        <div class="two columns">
          <button id="search-button" class="button-primary" style="float:right;" onclick="search()">Search</button>
        </div>
      </div>
      <div class="row">
        <div id="search-container" class="twelve columns">
        </div>
      </div>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
      <script src="https://connect.soundcloud.com/sdk/sdk-3.0.0.js"></script>
      <script src="js/auth.js"></script>
      <script src="js/search.js"></script>
      <script src="https://apis.google.com/js/client.js?onload=googleApiClientReady"></script>
      <script></script>
    </div>
  </body>
</html>
